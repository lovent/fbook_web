<!doctype html>
<html class="no-js" lang="zxx">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title><%= typeof pageTitle !== 'undefined' ? pageTitle + ' - FBook' : 'FBook - Framgia' %></title>
        <meta name="description" content="
            <%= __('For Framgia-ers who want to share and discuss about books') %>">
        <meta name="keywords" content="fbook, framgia fbook, muon sach noi bo">
        <meta name="author" content="Framgia">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <!-- Place favicon.ico in the root directory -->
        <link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
        <link rel="shortcut icon" type="image/ico" href="/images/favicon.ico" />

        <!-- Plugin-CSS -->
        <link rel="stylesheet" href="/bower/bootstrap4/dist/css/bootstrap.min.css">
        <link rel="stylesheet" href="/bower/fox-adm-style/css/bootstrap-extend.css">
        <link rel="stylesheet" href="/bower/font-awesome/css/font-awesome.min.css">
        <link rel="stylesheet" href="/bower/Ionicons/css/ionicons.min.css">
        <link rel="stylesheet" href="/bower/fox-adm-style/css/master_style.css">
        <link rel="stylesheet" href="/bower/fox-adm-style/css/skins.css">
        <link rel="stylesheet" href="/bower/cardslider/dist/css/cardslider.css">
        <link rel="stylesheet" href="/bower/ResponsiveSlides/responsiveslides.css">
        <link rel="stylesheet" href="/bower/bootstrap-datepicker/dist/css/bootstrap-datepicker.min.css">
        <link rel="stylesheet" href="/bower/bootstrap-daterangepicker/daterangepicker.css">
        <link rel="stylesheet" href="/bower/bootstrap3-wysihtml5-bower/dist/bootstrap3-wysihtml5.min.css">
        <link rel="stylesheet" href="/bower/jquery-toast-plugin/dist/jquery.toast.min.css">
        <link rel="stylesheet" href="/bower/sweetalert/dist/sweetalert.css">

        <!-- Google-Fonts -->
        <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700" rel="stylesheet">

        <!-- Main-Stylesheets -->
        <link rel="stylesheet" href="/css/admin/admin.min.css">
        <% if(locals.appCss) { %>
            <%- appCss %>
        <% }%>
        <script type="text/javascript">
        var i18n;
        function readTextFile(file)
        {
            var rawFile = new XMLHttpRequest();
            rawFile.open("GET", file, false);
            rawFile.onreadystatechange = function ()
            {
                if(rawFile.readyState === 4)
                {
                    if(rawFile.status === 200 || rawFile.status == 0)
                    {
                        var allText = rawFile.responseText;
                        i18n = JSON.parse(allText);
                    }
                }
            }
            rawFile.send(null);
        }
    </script>
    </head>
    <body class="hold-transition skin-black sidebar-mini relative-postion">

        <!--Begin header-->
        <%- include header.ejs %>
        <!--End header-->

        <!-- Begin side-panel -->
        <% include control_panel.ejs %>
        <!-- End side-panel -->

        <div class="content-wrapper minimun-height">
            <%- body %>
        </div>

        <!--Begin footer-->
        <%- include footer.ejs %>
        <!--End footer-->

        <!-- Vendor-JS -->
        <script type="text/javascript" src="/bower/jquery/dist/jquery.min.js"></script>
        <script type="text/javascript" src="/bower/jquery-toast-plugin/dist/jquery.toast.min.js"></script>
        <script type="text/javascript">
            var API_PATH = "<%= configs.api_base_url %>";
            var access_token, user = null;

            <% if(typeof(locals.access_token) !== 'undefined') { %>
                access_token = "<%= locals.access_token %>";
                user = JSON.parse('<%- JSON.stringify(locals.user) %>');
            <% } %>

            var configs = JSON.parse('<%- JSON.stringify(configs) %>');

            $.fn.andSelf = function() {
                return this.addBack.apply(this, arguments);
            }
        </script>


        <!-- Plugin-JS -->
        <script type="text/javascript" src="/bower/jquery-ui/jquery-ui.min.js"></script>
        <!-- Resolve conflict in jQuery UI tooltip with Bootstrap tooltip -->
        <script type="text/javascript">
            $.widget.bridge('uibutton', $.ui.button);
            function getCookie(cname) {
                var name = cname + '=';
                var decodedCookie = decodeURIComponent(document.cookie);
                var ca = decodedCookie.split(';');
                for(var i = 0; i < ca.length; i++) {
                    var c = ca[i];
                    while (c.charAt(0) == ' ') {
                        c = c.substring(1);
                    }
                    if (c.indexOf(name) == 0) {
                        return c.substring(name.length, c.length);
                    }
                }
                return '';
            }
            var lang = getCookie('language');
            if (lang === undefined || lang === null) {
                $('#myImage').attr('src', '/images/vietnam.png');
                readTextFile('/javascripts/i18n/vi.json');

            } else {
                langText = '';
                console.log('lang: ' + lang);
                switch (lang) {
                    case 'en':
                        readTextFile('/javascripts/i18n/en.json');
                        langText = '/images/english.png';
                        break;
                    case 'vi':
                        readTextFile('/javascripts/i18n/vi.json');
                        langText = '/images/vietnam.png';
                        break;
                    case 'jp':
                        readTextFile('/javascripts/i18n/jp.json');
                        langText = '/images/nhatban.png';
                        break;
                    default:
                        readTextFile('/javascripts/i18n/vi.json');
                        langText = '/images/vietnam.png';
                        break;
                }
            }
        </script>
        <script type="text/javascript" src="/bower/popper.js/dist/umd/popper.min.js"></script>
        <script type="text/javascript" src="/bower/bootstrap4/dist/js/bootstrap.min.js"></script>
        <script type="text/javascript" src="/bower/Chart.js/Chart.min.js"></script>
        <script type="text/javascript" src="/bower/jquery.sparkline/index.js"></script>
        <script type="text/javascript" src="/bower/jquery-knob/dist/jquery.knob.min.js"></script>
        <script type="text/javascript" src="/bower/moment/min/moment.min.js"></script>
        <script type="text/javascript" src="/bower/bootstrap-daterangepicker/daterangepicker.js"></script>
        <script type="text/javascript" src="/bower/bootstrap-datepicker/dist/js/bootstrap-datepicker.min.js"></script>
        <script type="text/javascript" src="/bower/eonasdan-bootstrap-datetimepicker/build/js/bootstrap-datetimepicker.min.js"></script>
        <script type="text/javascript" src="/bower/bootstrap3-wysihtml5-bower/dist/bootstrap3-wysihtml5.all.min.js"></script>
        <script type="text/javascript" src="/bower/jquery-slimscroll/jquery.slimscroll.min.js"></script>
        <script type="text/javascript" src="/bower/fastclick/lib/fastclick.js"></script>
        <script type="text/javascript" src="/bower/fox-adm-style/js/template.js"></script>
        <script type="text/javascript" src="/bower/jquery-validation/dist/jquery.validate.min.js"></script>
        <script type="text/javascript" src="/bower/sweetalert/dist/sweetalert.min.js"></script>
        <script type="text/javascript" src="https://js.pusher.com/4.1/pusher.min.js"></script>
        <script type="text/javascript" src="/javascripts/admin/admin.js"></script>
            <% if (typeof info != 'undefined' && info != '') { %>
            <script> type="text/javascript"
                showNotify("<%= info %>", __('info'), 3000);
            </script>
        <% } %>
        <% if (typeof error != 'undefined' && error != '') { %>
            <script type="text/javascript">
                showNotify("<%= error %>", __('error'), 3000);
            </script>
        <% } %>

        <% if(locals.appjs) { %>
            <%- appjs %>
        <% } %>
    </body>
</html>
